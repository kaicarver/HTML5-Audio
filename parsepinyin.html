<!DOCTYPE html>
<html>
<head>
  <style>
    textarea { width: 1000px; height: 180px; }
    textarea#hanzi { height: 120px; }
  </style>
</head>
<body>
  <p>Add tone marks to characters.</p>
  <p>Chinese text using Chinese characters:<br>
    <textarea id="hanzi">０、我知道騎腳踏車是一種很好的運動，週末假日，常常跟太太騎腳踏車到郊外去。
１、我的腳踏車是朋友送給我的，雖然看起來很舊，可是騎起來還不錯。
２、今天腳踏車有點怪怪的，不知道怎麼搞的，我一騎上去，車子就往旁邊歪。上車一看，原來後台沒氣了，只好把車推倒車行去，借個打氣筒打打氣。
３、老闆說我的車打氣沒用，因為車胎破了個小洞，爆胎了。怎麼又爆胎了？我上個禮拜才補過的。
４、我請老闆想辦法再幫我補一補，可是老闆說這部車的內胎已經補了兩次，不值得再補了，不如換個內胎比較划得來（划算）。
５、後來老闆發現腳踏板也壞了，鍊條也鬆了，所以建議我買部新車，他說現在的變速車騎起來又快又輕鬆。
６、我當然知道變速車好，可是這個月沒錢買。所以拜託老闆先幫我把舊車修理修理，等下個月再說吧！</textarea>
  </p>
  <p>Same Chinese text, using pinyin (e.g. provided by <a href="https://translate.google.com/#zh-CN/en/%E4%BC%8D%E9%BA%A5%E4%BA%9E%E7%8E%8B">Google Translate</a>):<br>
    <textarea id="pinyin">0, Wǒ zhīdào qí jiǎotàchē shì yīzhǒng hěn hǎo de yùndòng, zhōumò jiàrì, chángcháng gēn tàitài qí jiǎotàchē dào jiāowài qù. 
1, Wǒ de jiǎotàchē shì péngyǒu sòng gěi wǒ de, suīrán kànqǐlái hěn jiù, kěshì qíqǐlái hái bùcuò. 
2, Jīntiān jiǎotàchē yǒudiǎn guài guài de, bù zhīdào zěnme gǎo de, wǒ yī qí shàngqù, chēzi jiù wǎng pángbiān wāi. Shàng chē yī kàn, yuánlái hòutái méi qìle, zhǐhǎo bǎ chē tuīdǎo chē xíng qù, jiè gè dǎqìtǒng dǎdǎqì. 
3, Lǎobǎn shuō wǒ de chē dǎqì méi yòng, yīnwèi chētāi pòle gè xiǎo dòng, bàotāile. Zěnme yòu bàotāile? Wǒ shàng gè lǐbài cái bǔguò de. 
4, Wǒ qǐng lǎobǎn xiǎng bànfǎ zài bāng wǒ bǔ yī bǔ, kěshì lǎobǎn shuō zhè bù chē de nèitāi yǐjīng bǔle liǎng cì, bù zhídé zài bǔle, bùrú huàngè nèitāi bǐjiào huádélái (huásuàn). 
5, Hòulái lǎobǎn fāxiàn jiǎotàbǎn yě huàile, liàntiáo yě sōngle, suǒyǐ jiànyì wǒ mǎi bù xīn chē, tā shuō xiànzài de biànsùchē qíqǐlái yòu kuài yòu qīngsōng. 
6, Wǒ dāngrán zhīdào biànsùchē hǎo, kěshì zhège yuè méi qián mǎi. Suǒyǐ bàituō lǎobǎn xiān bāng wǒ bǎ jiù chē xiūlǐ xiūlǐ, děng xià gè yuè zàishuō ba!</textarea>
  </p>
  <p>Pinyin without tones:<br>
    <textarea id="notones"></textarea>
  </p>
  <p>Parsed pinyin:<br>
    <textarea id="parsed"></textarea>
  </p>
  <button onclick="parse()">Parse</button>
  <script>
    function parse() {
      document.getElementById('notones').value = tr(document.getElementById('pinyin').value,
						   'àáǎāēěèéìíīǐōòǒóǔùúū',
						   'aaaaeeeeiiiioooouuuu');
      document.getElementById('parsed').value = 'Wo zhi dao qi jiao ta che shi yi zhong hen hao de yun dong zhou mo jia ri chang chang gen tai tai qi jiao ta che dao jiao wai qu Wo de jiao ta che shi peng you song gei wo de sui ran kan qi lai hen jiu ke shi qi qi lai hai bu cuo Jin tian jiao ta che you dian guai guai de bu zhi dao zen me gao de wo yi qi shang qu che zi jiu wang pang bian wai Shang che yi kan yuan lai hou tai mei qi le zhi hao ba che tui dao che xing qu jie ge da qi tong da da qi Lao ban shuo wo de che da qi mei yong yin wei che tai po le ge xiao dong bao tai le Zen me you bao tai le Wo shang ge li bai cai bu guo de Wo qing lao ban xiang ban fa zai bang wo bu yi bu ke shi lao ban shuo zhe bu che de nei tai yi jing bu le liang ci bu zhi de zai bu le bu ru huang e nei tai bi jiao hua de lai hua suan Hou lai lao ban fa xian jiao ta ban ye huai le lian tiao ye song le suo yi jian yi wo mai bu xin che ta shuo xian zai de bian su che qi qi lai you kuai you qing song Wo dang ran zhi dao bian su che hao ke shi zhe ge yue mei qian mai Suo yi bai tuo lao ban xian bang wo ba jiu che xiu li xiu li deng xia ge yue zai shuo ba';
    }
    function tr( text, search, replace ) {
      var regex = RegExp( '[' + search + ']', 'g' );
      var t = text.replace( regex, 
			    function( chr ) {
			      // Get the position of the found character in the search string.
			      var ind = search.indexOf( chr );
			      // Get the corresponding character from the replace string.
			      var r = replace.charAt( ind );
			      return r;
			    } );
      return t;
    }
    function get(pinyin) {
      
    }
  </script>
</body>
</html>
